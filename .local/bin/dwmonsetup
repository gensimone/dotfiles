#!/bin/sh

state=1

# wait n seconds to prevent xfce
# to overwrite the first call
sleep 3

while true; do
	con=$(xrandr | grep HDMI-1 | cut -d ' ' -f 2)
	if [ $con = "connected" ]; then
		if [ $state -eq 1 ]; then
			xrandr --auto
			xrandr --output eDP-1 --off
			state=0
		fi
	else
		if [ $state -eq 0 ]; then
			xrandr --auto
			state=1
		fi
	fi
	sleep 5s
done
