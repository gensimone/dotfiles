#!/bin/bash


DIV="|"

VOLUME="$(amixer sget 'Master' | tail -n 1 | cut -d ' ' -f 7 | sed 's/[[]/''/g; s/[]]/''/g')"
DATE="$(date +"%b %d %A %H:%M")"

STATUS_BAR="$DIV Vol: $VOLUME $DIV $DATE"

# This assumes there is only one battery.
BAT="$(ls /sys/class/power_supply | grep BAT)"
if [ "$BAT" ]; then
    BAT_CAPACITY="$(cat "/sys/class/power_supply/$BAT/capacity")%"
    BAT_STATUS="($(cat "/sys/class/power_supply/$BAT/status"))"
    STATUS_BAR="$DIV Bat: $BAT_CAPACITY $BAT_STATUS $STATUS_BAR"
fi

xsetroot -name "$STATUS_BAR"
