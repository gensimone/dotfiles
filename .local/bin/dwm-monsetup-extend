#!/bin/sh

LAP_DEV="eDP-1"
HDMI_DEV="HDMI-1"

update_monitors() {
	if [ $1 == "connected" ]; then
		xrandr --auto
		xrandr --output $HDMI_DEV --primary --right-of $LAP_DEV
	else
		xrandr --auto
	fi
}

PREV=$(xrandr | grep HDMI-1 | cut -d ' ' -f 2)

while true; do
	CUR=$(xrandr | grep HDMI-1 | cut -d ' ' -f 2)
	if [ $CUR != $PREV ]; then
		update_monitors "$CUR"
		PREV=$CUR
	fi
	sleep 5s
done
